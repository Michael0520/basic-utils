# E-commerce Frontend System Design - Interview Script

## 開場白

"在設計購物車系統時，我會先確認幾個核心需求：

1. 購物車需要在整個網站中保持持續性
2. 支援多設備同步
3. 即時庫存追蹤
4. 離線功能
5. 高併發處理

讓我從架構設計開始說明..."

## 狀態管理說明

"考慮到購物車需要在全站共享，我選擇使用 Zustand 作為狀態管理工具。為什麼選 Zustand 而不是 Redux？

- 更輕量級
- API 更簡潔
- TypeScript 支援更好
- 學習曲線較低

狀態設計包含了購物車項目、總額、同步狀態等..."

## 資料持久化解釋

"關於資料持久化，我採用了雙軌策略：

1. 客戶端：
   - LocalStorage 處理基本的離線支援
   - 較大數據集會用 IndexedDB
2. 服務端：
   - 實時同步
   - 處理數據衝突"

## 關鍵功能重點

"在處理購物車操作時，我特別注意了幾個關鍵點：

1. 庫存管理：

   - 採用樂觀更新（Optimistic Updates）
   - 預留庫存機制
   - 處理併發衝突

2. 錯誤處理：
   - 網路斷線恢復
   - 庫存衝突解決
   - 會話過期處理"

## 效能優化說明

"為了提升效能，我實施了以下優化：

1. 使用 debounce 處理頻繁的購物車更新
2. 批量處理請求
3. 商品詳情延遲加載
4. 庫存檢查快取

這些優化能有效減少服務器負載並提升用戶體驗。"

## 邊界情況處理

"系統還需要處理各種邊界情況：

1. 庫存相關：
   - 結帳時庫存不足
   - 大量訂單限制
   - 商品下架處理
2. 用戶場景：
   - 多標籤頁同步
   - 設備切換
   - 訪客購物車遷移"

## 擴展性考量

"考慮到系統的擴展性，我實施了：

1. 合理的快取策略
2. 請求限流
3. 負載均衡
4. 資料分片

這些措施確保系統能夠隨著用戶量增長而擴展。"

## 監控指標

"最後，為了確保系統穩定運行，我們需要監控：

1. 購物車放棄率
2. 錯誤發生率
3. 性能指標
4. 庫存警報"

## 結尾

"總的來說，這個設計注重：

- 資料一致性
- 即時同步
- 離線功能
- 錯誤恢復
- 用戶體驗

有什麼特定的部分您想要我詳細說明的嗎？"
